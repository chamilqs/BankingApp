@using BankingApp.Core.Application.DTOs.Account
@using BankingApp.Core.Application.Dtos.Account
@using BankingApp.Core.Application.Enums
@using BankingApp.Core.Application.ViewModels.Products
@using BankingApp.Core.Application.ViewModels.User;
@model ProductViewModel;

@{
    ViewData["Title"] = "Client Dashoard";
   
}

<div>
    <div class="d-flex justify-content-between mb-1">
        <h1 class="h2 mb-3">@ViewData["Title"]</h1>

    </div>

    <div class="">
        @if ((Model.SavingsAccounts.Count == 0 && Model.CreditCards.Count == 0 && Model.Loans.Count == 0) || Model == null)
        {
            <h3 class="text-center">This user doesn't have any product</h3>
        }
        else
        {
            <section>
                <div class="card shadow rounded">
                    <h2 class="card-header">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-savings-account" aria-expanded="false" aria-controls="collapse-savings-account">
                            <i class="bi bi-piggy-bank"></i>
                            Savings Accounts
                        </button>
                    </h2>
                    <!--Savings Account-->
                    <div id="collapse-savings-account" class="collapse">
                        <div class="card-body">
                            @if (!Model.SavingsAccounts.Any())
                            {
                                <h3 class="text-center">This user doesn't have any savings account.</h3>
                            }
                            else
                            {
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Id</th>
                                            <th>Balance</th>
                                            <th>DateCreated</th>
                                            <th class="text-center col-1">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var savingsAccount in Model.SavingsAccounts)
                                        {
                                            <tr>
                                                <td>@savingsAccount.Id</td>
                                                <td>@savingsAccount.Balance</td>
                                                <td>@savingsAccount.DateCreated</td>
                                              
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            }
                        </div>
                    </div>
                </div>
                <!--Credit Card-->
                <div class="card shadow rounded">
                    <h2 class="card-header">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-credit-card" aria-expanded="false" aria-controls="collapse-credit-card">
                            <i class="bi bi-credit-card me-2"></i>
                            Credit Cards
                        </button>
                    </h2>
                    <div id="collapse-credit-card" class="collapse">
                        <div class="card-body">
                            @if (!Model.CreditCards.Any())
                            {
                                <h3 class="text-center">This user doesn't have any credit card.</h3>
                            }
                            else
                            {
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Id</th>
                                            <th>Limit</th>
                                            <th>Balance</th>
                                            <th>Debt</th>
                                            <th>DateCreated</th>
                                            <th class="text-center col-1">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var creditCard in Model.CreditCards)
                                        {
                                            <tr>
                                                <td>@creditCard.Id</td>
                                                <td>@creditCard.Limit</td>
                                                <td>@creditCard.Balance</td>
                                                <td>@creditCard.Debt</td>
                                                <td>@creditCard.DateCreated</td>
                                              
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            }
                        </div>
                    </div>
                </div>
                <!--Loan-->
                <div class="card shadow rounded">
                    <h2 class="card-header">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-loans" aria-expanded="false" aria-controls="collapse-loans">
                            <i class="bi bi-credit-card me-2"></i>
                            Loans
                        </button>
                    </h2>
                    <div id="collapse-loans" class="collapse">
                        <div class="card-body">
                            @if (!Model.Loans.Any())
                            {
                                <h3 class="text-center">This user doesn't have any loan.</h3>
                            }
                            else
                            {
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Id</th>
                                            <th>Amount</th>
                                            <th>Balance</th>
                                            <th>DateCreated</th>
                                            <th class="text-center col-1">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var loan in Model.Loans)
                                        {
                                            <tr>
                                                <td>@loan.Id</td>
                                                <td>@loan.Amount</td>
                                                <td>@loan.Balance</td>
                                                <td>@loan.DateCreated</td>
                                               
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            }
                        </div>
                    </div>
                </div>
            </section>
        }
    </div>
</div>